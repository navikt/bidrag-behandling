CREATE TYPE OPPLYSNINGER_TYPE AS ENUM
(
    'INNTEKTSOPPLYSNINGER',
    'BOFORHOLD'
);

CREATE CAST (VARCHAR AS OPPLYSNINGER_TYPE) WITH INOUT AS IMPLICIT;

CREATE TABLE OPPLYSNINGER (
    ID                  INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY (INCREMENT 1 START 1 MINVALUE 1),
    BEHANDLING_ID       INT NOT NULL,

    AKTIV               BOOLEAN,
    DATA                TEXT,
    HENTET_DATO         DATE,
    OPPLYSNINGER_TYPE   OPPLYSNINGER_TYPE,

    CONSTRAINT FK_BEHANDLING_ID FOREIGN KEY (BEHANDLING_ID)
    REFERENCES BEHANDLING (ID) MATCH SIMPLE
);

CREATE TABLE INNTEKT (
    ID                  INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY (INCREMENT 1 START 1 MINVALUE 1),
    BEHANDLING_ID       INT NOT NULL,

    TA_MED              BOOLEAN NOT NULL,
    BESKRIVELSE         TEXT,
    BELOP               MONEY NOT NULL,
    DATO_FOM            DATE,
    DATO_TOM            DATE,
    IDENT               TEXT NOT NULL,

    CONSTRAINT FK_BEHANDLING_ID FOREIGN KEY (BEHANDLING_ID)
    REFERENCES BEHANDLING (ID) MATCH SIMPLE
);
