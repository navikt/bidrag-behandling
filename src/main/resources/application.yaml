management:
  endpoints:
    web:
      exposure:
        include: "prometheus,health"

logging.level:
  secureLogger: DEBUG

springdoc:
  packages-to-scan: no.nav.bidrag.kalkulator.controller
  paths-to-match: "/api/**"
  swagger-ui:
    path: /
    showCommonExtensions: true

spring.main.banner-mode: off

---
spring.config.activate.on-profile: nais,lokal-nais

no.nav.security.jwt:
  client:
    registration:
      bidrag-person:
        resource-url: ${BIDRAG_PERSON_URL}
        token-endpoint-url: https://login.microsoftonline.com/${AZURE_APP_TENANT_ID}/oauth2/v2.0/token
        grant-type: urn:ietf:params:oauth:grant-type:jwt-bearer
        scope: api://${BIDRAG_PERSON_SCOPE}/.default
        authentication:
          client-id: ${AZURE_APP_CLIENT_ID}
          client-secret: ${AZURE_APP_CLIENT_SECRET}
          client-auth-method: client_secret_post


  issuer.aad:
    discovery_url: https://login.microsoftonline.com/${AZURE_APP_TENANT_ID}/v2.0/.well-known/openid-configuration
    accepted_audience: ${AZURE_APP_CLIENT_ID}, api://${AZURE_APP_CLIENT_ID}

#no.nav.security.jwt:
#  dont-propagate-bearertoken: true
#  client.registration:
#    bidrag-person:
#      token-endpoint-url: ${AZURE_OPENID_CONFIG_TOKEN_ENDPOINT}
#      grant-type: client_credentials
#      scope: api://${BIDRAG_PERSON_SCOPE}/.default
#      authentication:
#        client-id: ${AZURE_APP_CLIENT_ID}
#        client-secret: ${AZURE_APP_CLIENT_SECRET}
#        client-auth-method: client_secret_basic
#    bidrag-dokument:
#      token-endpoint-url: ${AZURE_OPENID_CONFIG_TOKEN_ENDPOINT}
#      grant-type: client_credentials
#      scope: api://${BIDRAG_DOKUMENT_SCOPE}/.default
#      authentication:
#        client-id: ${AZURE_APP_CLIENT_ID}
#        client-secret: ${AZURE_APP_CLIENT_SECRET}
#        client-auth-method: client_secret_basic
#  issuer:
#    tokenx:
#      discoveryurl: ${TOKEN_X_WELL_KNOWN_URL}
#      accepted_audience: ${TOKEN_X_CLIENT_ID}